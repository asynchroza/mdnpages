.\" Automatically generated by Pandoc 3.1.11
.\"
.TH "Response.bodyUsed" "JS" "July 7, 2023" "JavaScript" "JavaScript Reference Manual"
.SH NAME
Response.bodyUsed \- Response: bodyUsed property
.SH SYNOPSIS
The \f[B]\f[CB]bodyUsed\f[B]\f[R] read\-only property of the
\f[CR]Response\f[R] interface is a boolean value that indicates whether
the body has been read yet.
.SH VALUE
A boolean value.
.SH EXAMPLES
.SS Checking \f[CR]bodyUsed\f[R]
This example illustrates that reading the body of a response changes the
value of \f[CR]bodyUsed\f[R] from \f[CR]false\f[R] to \f[CR]true\f[R].
.PP
The example contains an empty image.
.PP
When the example\[cq]s JavaScript runs, we fetch an image and assigns
the returned promise to a variable \f[CR]responsePromise\f[R].
.PP
When the user clicks \[lq]Use response\[rq], we check whether the
response has been used already.
If it has, we print a message.
If it has not, we read the response body and used it to provide a value
for the image\[cq]s \f[CR]src\f[R] attribute.
.SS HTML
.IP
.EX
<button id=\[dq]use\[dq]>Use response</button>
<button id=\[dq]reset\[dq]>Reset</button>
<br />
<img id=\[dq]my\-image\[dq] src=\[dq]\[dq] />
<pre id=\[dq]log\[dq]></pre>
.EE
.SS JavaScript
.IP
.EX
const useResponse = document.querySelector(\[dq]#use\[dq]);
const reset = document.querySelector(\[dq]#reset\[dq]);
const myImage = document.querySelector(\[dq]#my\-image\[dq]);
const log = document.querySelector(\[dq]#log\[dq]);

const responsePromise = fetch(
  \[dq]https://upload.wikimedia.org/wikipedia/commons/7/77/Delete_key1.jpg\[dq],
);

useResponse.addEventListener(\[dq]click\[dq], async () => {
  const response = await responsePromise;
  if (response.bodyUsed) {
    log.textContent = \[dq]Body has already been used!\[dq];
  } else {
    const result = await response.blob();
    const objectURL = URL.createObjectURL(result);
    myImage.src = objectURL;
  }
});

reset.addEventListener(\[dq]click\[dq], () => {
  document.location.reload();
});
.EE
.SS Result
Initially there is no value for the image.
If you click \[lq]Use response\[rq] once, then \f[CR]bodyUsed\f[R] is
\f[CR]false\f[R], so we read the response and set the image.
If you then click \[lq]Use response\[rq] again, then \f[CR]bodyUsed\f[R]
is \f[CR]true\f[R], and we print the message.
.PP
Click \[lq]Reset\[rq] to reload the example, so you can try again.
.SH SEE ALSO
.IP \[bu] 2
ServiceWorker API
.IP \[bu] 2
HTTP access control (CORS)
.IP \[bu] 2
HTTP
