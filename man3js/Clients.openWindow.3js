.\" Automatically generated by Pandoc 3.1.11
.\"
.TH "Clients.openWindow" "JS" "July 7, 2023" "JavaScript" "JavaScript Reference Manual"
.SH NAME
Clients.openWindow \- Clients: openWindow() method
.SH SYNOPSIS
The \f[B]\f[CB]openWindow()\f[B]\f[R] method of the \f[CR]Clients\f[R]
interface creates a new top level browsing context and loads a given
URL.
If the calling script doesn\[cq]t have permission to show popups,
\f[CR]openWindow()\f[R] will throw an \f[CR]InvalidAccessError\f[R].
.PP
In Firefox, the method is allowed to show popups only when called as the
result of a notification click event.
.PP
In Chrome for Android, the method may instead open the URL in an
existing browsing context provided by a standalone web app previously
added to the user\[cq]s home screen.
As of recently, this also works on Chrome for Windows.
.SH SYNTAX
.IP
.EX
openWindow(url)
.EE
.SS Parameters
.TP
\f[B]url\f[R]
A string representing the URL of the client you want to open in the
window.
Generally this value must be a URL from the same origin as the calling
script.
.SS Return value
A \f[CR]Promise\f[R] that resolves to a \f[CR]WindowClient\f[R] object
if the URL is from the same origin as the service worker or a null value
otherwise.
.SS Exceptions
.TP
\f[B]InvalidAccessError\f[R] \f[B]DOMException\f[R]
The promise is rejected with this exception if none of the windows in
the app\[cq]s origin have transient activation.
.SH SECURITY REQUIREMENTS
.IP \[bu] 2
At least one window in the app\[cq]s origin must have transient
activation.
.SH EXAMPLES
.IP
.EX
// Send notification to OS if applicable
if (self.Notification.permission === \[dq]granted\[dq]) {
  const notificationObject = {
    body: \[dq]Click here to view your messages.\[dq],
    data: { url: \[ga]${self.location.origin}/some/path\[ga] },
    // data: { url: \[aq]http://example.com\[aq] },
  };
  self.registration.showNotification(
    \[dq]You\[aq]ve got messages!\[dq],
    notificationObject,
  );
}

// Notification click event listener
self.addEventListener(\[dq]notificationclick\[dq], (e) => {
  // Close the notification popout
  e.notification.close();
  // Get all the Window clients
  e.waitUntil(
    clients.matchAll({ type: \[dq]window\[dq] }).then((clientsArr) => {
      // If a Window tab matching the targeted URL already exists, focus that;
      const hadWindowToFocus = clientsArr.some((windowClient) =>
        windowClient.url === e.notification.data.url
          ? (windowClient.focus(), true)
          : false,
      );
      // Otherwise, open a new tab to the applicable URL and focus it.
      if (!hadWindowToFocus)
        clients
          .openWindow(e.notification.data.url)
          .then((windowClient) => (windowClient ? windowClient.focus() : null));
    }),
  );
});
.EE
