.\" Automatically generated by Pandoc 3.1.11
.\"
.TH "Permissions.query" "JS" "December 4, 2023" "JavaScript" "JavaScript Reference Manual"
.SH NAME
Permissions.query \- Permissions: query() method
.SH SYNOPSIS
The \f[B]\f[CB]Permissions.query()\f[B]\f[R] method of the
\f[CR]Permissions\f[R] interface returns the state of a user permission
on the global scope.
.SH SYNTAX
.IP
.EX
query(permissionDescriptor)
.EE
.SS Parameters
.TP
\f[B]permissionDescriptor\f[R]
An object that sets options for the \f[CR]query\f[R] operation
consisting of a comma\-separated list of name\-value pairs.
The available options are:
.RS
.TP
\f[B]name\f[R]
The name of the API whose permissions you want to query.
Each browser supports a different set of values.
You\[cq]ll find Firefox values \c
.UR
https://searchfox.org/mozilla-central/source/dom/webidl/Permissions.webidl#10
there
.UE \c
, Chromium values \c
.UR
https://chromium.googlesource.com/chromium/src/+/refs/heads/main/third_party/blink/renderer/modules/permissions/permission_descriptor.idl
there
.UE \c
, and WebKit values \c
.UR
https://github.com/WebKit/WebKit/blob/main/Source/WebCore/Modules/permissions/PermissionName.idl
there
.UE \c
\&.
.TP
\f[B]userVisibleOnly\f[R]
(Push only, not supported in Firefox \[em] see the Browser Support
section below) Indicates whether you want to show a notification for
every message or be able to send silent push notifications.
The default is \f[CR]false\f[R].
.TP
\f[B]sysex\f[R] (Midi only)
Indicates whether you need and/or receive system exclusive messages.
The default is \f[CR]false\f[R].
.RE
.RS
.PP
\f[B]Note:\f[R] As of Firefox 44, the permissions for Notifications and
Push have been merged.
If permission is granted (e.g.\ by the user, in the relevant permissions
dialog), \f[CR]navigator.permissions.query()\f[R] will return
\f[CR]true\f[R] for both \f[CR]notifications\f[R] and \f[CR]push\f[R].
.RE
.RS
.PP
\f[B]Note:\f[R] The \f[CR]persistent\-storage\f[R] permission allows an
origin to use a persistent box (i.e., \c
.UR https://storage.spec.whatwg.org/#persistence
persistent storage
.UE \c
) for its storage, as per the \c
.UR https://storage.spec.whatwg.org/
Storage API
.UE \c
\&.
.RE
.SS Return value
A \f[CR]Promise\f[R] that resolves to a \f[CR]PermissionStatus\f[R]
object.
.SS Exceptions
.TP
\f[B]InvalidStateError\f[R] \f[B]DOMException\f[R]
Thrown if \f[CR]query()\f[R] method is invoked in the browsing context
and its associated document is not fully active.
.TP
\f[B]TypeError\f[R]
Thrown if retrieving the \f[CR]PermissionDescriptor\f[R] information
failed in some way, or the permission doesn\[cq]t exist or is
unsupported by the user agent.
.SH EXAMPLES
.IP
.EX
navigator.permissions.query({ name: \[dq]geolocation\[dq] }).then((result) => {
  if (result.state === \[dq]granted\[dq]) {
    showLocalNewsWithGeolocation();
  } else if (result.state === \[dq]prompt\[dq]) {
    showButtonToEnableLocalNews();
  }
  // Don\[aq]t do anything if the permission was denied.
});
.EE
