.\" Automatically generated by Pandoc 3.1.11
.\"
.TH "PushSubscription.getKey" "JS" "October 2, 2023" "JavaScript" "JavaScript Reference Manual"
.SH NAME
PushSubscription.getKey \- PushSubscription: getKey() method
.SH SYNOPSIS
The \f[CR]getKey()\f[R] method of the \f[CR]PushSubscription\f[R]
interface returns an \f[CR]ArrayBuffer\f[R] representing a client public
key, which can then be sent to a server and used in encrypting push
message data.
.SH SYNTAX
.IP
.EX
getKey(name)
.EE
.SS Parameters
.TP
\f[B]name\f[R]
A string representing the encryption method used to generate a client
key.
The value can be:
.RS
.TP
\f[B]p256dh\f[R]
An \c
.UR https://en.wikipedia.org/wiki/Elliptic_curve_Diffie%E2%80%93Hellman
Elliptic curve Diffie\[en]Hellman
.UE \c
\ public key on the P\-256 curve (that is, the NIST secp256r1 elliptic
curve).
The resulting key is an uncompressed point in ANSI X9.62 format.
.TP
\f[B]auth\f[R]
An authentication secret, as described in \c
.UR
https://datatracker.ietf.org/doc/html/draft-ietf-webpush-encryption-08
Message Encryption for Web Push
.UE \c
\&.
.RE
.SS Return value
An \f[CR]ArrayBuffer\f[R] or \f[CR]null\f[R] if no public key can be
found.
.SH EXAMPLES
.IP
.EX
reg.pushManager.getSubscription().then((subscription) => {
  // Enable any UI which subscribes / unsubscribes from
  // push messages.

  subBtn.disabled = false;

  if (!subscription) {
    console.log(\[dq]Not yet subscribed to Push\[dq]);
    // We aren\[aq]t subscribed to push, so set UI
    // to allow the user to enable push
    return;
  }

  // Set your UI to show they have subscribed for
  // push messages
  subBtn.textContent = \[dq]Unsubscribe from Push Messaging\[dq];
  isPushEnabled = true;

  // initialize status, which includes setting UI elements for subscribed status
  // and updating Subscribers list via push
  const endpoint = subscription.endpoint;
  const key = subscription.getKey(\[dq]p256dh\[dq]);
  const auth = subscription.getKey(\[dq]auth\[dq]);

  // ...
});
.EE
