.\" Automatically generated by Pandoc 3.1.11
.\"
.TH "OrientationSensor" "JS" "September 8, 2023" "JavaScript" "JavaScript Reference Manual"
.SH NAME
OrientationSensor \- OrientationSensor
.SH SYNOPSIS
The \f[B]\f[CB]OrientationSensor\f[B]\f[R] interface of the Sensor APIs
is the base class for orientation sensors.
This interface cannot be used directly.
Instead it provides properties and methods accessed by interfaces that
inherit from it.
.PP
This feature may be blocked by a Permissions Policy set on your server.
.SH INTERFACES BASED ON ORIENTATIONSENSOR
Below is a list of interfaces based on the OrientationSensor interface.
.IP \[bu] 2
\f[CR]AbsoluteOrientationSensor\f[R]
.IP \[bu] 2
\f[CR]RelativeOrientationSensor\f[R]
.SH INSTANCE PROPERTIES
.TP
\f[B]OrientationSensor.quaternion\f[R]
Returns a four element \f[CR]Array\f[R] whose elements contain the
components of the unit quaternion representing the device\[cq]s
orientation.
.SH INSTANCE METHODS
.TP
\f[B]OrientationSensor.populateMatrix()\f[R]
Populates the given object with the rotation matrix based on the latest
sensor reading.
.SH EXAMPLES
.SS Basic Example
The following example, which is loosely based on \c
.UR https://intel.github.io/generic-sensor-demos/orientation-phone/
Intel\[cq]s Orientation Phone demo
.UE \c
, instantiates an \f[CR]AbsoluteOrientationSensor\f[R] with a frequency
of 60 times a second.
On each reading it uses \f[CR]OrientationSensor.quaternion\f[R] to
rotate a visual model of a phone.
.IP
.EX
const options = { frequency: 60, referenceFrame: \[dq]device\[dq] };
const sensor = new AbsoluteOrientationSensor(options);

sensor.addEventListener(\[dq]reading\[dq], () => {
  // model is a Three.js object instantiated elsewhere.
  model.quaternion.fromArray(sensor.quaternion).inverse();
});
sensor.addEventListener(\[dq]error\[dq], (error) => {
  if (event.error.name === \[dq]NotReadableError\[dq]) {
    console.log(\[dq]Sensor is not available.\[dq]);
  }
});
sensor.start();
.EE
.SS Permissions Example
Using orientation sensors requires requesting permissions for multiple
device sensors.
Because the \f[CR]Permissions\f[R] interface uses promises, a good way
to request permissions is to use \f[CR]Promise.all\f[R].
.IP
.EX
const sensor = new AbsoluteOrientationSensor();
Promise.all([
  navigator.permissions.query({ name: \[dq]accelerometer\[dq] }),
  navigator.permissions.query({ name: \[dq]magnetometer\[dq] }),
  navigator.permissions.query({ name: \[dq]gyroscope\[dq] }),
]).then((results) => {
  if (results.every((result) => result.state === \[dq]granted\[dq])) {
    sensor.start();
    // \&...
  } else {
    console.log(\[dq]No permissions to use AbsoluteOrientationSensor.\[dq]);
  }
});
.EE
