.\" Automatically generated by Pandoc 3.1.11
.\"
.TH "ServiceWorker" "JS" "December 25, 2023" "JavaScript" "JavaScript Reference Manual"
.SH NAME
ServiceWorker \- ServiceWorker
.SH SYNOPSIS
\f[B]Secure context\f[R]: This feature is available only in secure
contexts (HTTPS).
.PP
The \f[B]\f[CB]ServiceWorker\f[B]\f[R] interface of the Service Worker
API provides a reference to a service worker.
Multiple browsing contexts (e.g.\ pages, workers, etc.)
can be associated with the same service worker, each through a unique
\f[CR]ServiceWorker\f[R] object.
.PP
A \f[CR]ServiceWorker\f[R] object is available via a number of
properties:
.IP \[bu] 2
\f[CR]ServiceWorkerRegistration.active\f[R]
.IP \[bu] 2
\f[CR]ServiceWorkerGlobalScope.serviceWorker\f[R]
.IP \[bu] 2
\f[CR]ServiceWorkerContainer.controller\f[R] \[em] when the service
worker is in \f[CR]activating\f[R] or \f[CR]activated\f[R] state
.IP \[bu] 2
\f[CR]ServiceWorkerRegistration.installing\f[R] \[em] when the service
worker is in \f[CR]installing\f[R] state
.IP \[bu] 2
\f[CR]ServiceWorkerRegistration.waiting\f[R] \[em] when the service
worker is in \f[CR]installed\f[R] state
.PP
The \f[CR]ServiceWorker\f[R] interface is dispatched a set of lifecycle
events \[em] \f[CR]install\f[R] and \f[CR]activate\f[R] \[em] and
functional events including \f[CR]fetch\f[R].
A \f[CR]ServiceWorker\f[R] object has an associated
\f[CR]ServiceWorker.state\f[R], related to its lifecycle.
.PP
Service workers allow static import of ECMAScript modules, if supported,
using \f[CR]import\f[R].
Dynamic import is disallowed by the specification \[em] calling
\f[CR]import()\f[R] will throw.
.SH INSTANCE PROPERTIES
\f[I]The \f[CI]ServiceWorker\f[I] interface inherits properties from its
parent, \f[CI]EventTarget\f[I].\f[R]
.TP
\f[B]ServiceWorker.scriptURL\f[R] \f[I](read\-only)\f[R]
Returns the \f[CR]ServiceWorker\f[R] serialized script URL defined as
part of \f[CR]ServiceWorkerRegistration\f[R].
The URL must be on the same origin as the document that registers the
\f[CR]ServiceWorker\f[R].
.TP
\f[B]ServiceWorker.state\f[R] \f[I](read\-only)\f[R]
Returns the state of the service worker.
It returns one of the following values: \f[CR]parsed\f[R],
\f[CR]installing\f[R], \f[CR]installed\f[R], \f[CR]activating\f[R],
\f[CR]activated\f[R], or \f[CR]redundant\f[R].
.SH INSTANCE METHODS
\f[I]The \f[CI]ServiceWorker\f[I] interface inherits methods from its
parent, \f[CI]EventTarget\f[I].\f[R]
.TP
\f[B]ServiceWorker.postMessage()\f[R]
Sends a message \[em] consisting of any structured\-cloneable JavaScript
object \[em] to the service worker.
The message is transmitted to the service worker using a
\f[CR]message\f[R] event on its global scope.
.SH EVENTS
.TP
\f[B]statechange\f[R]
Fired when \f[CR]ServiceWorker.state\f[R] changes.
.TP
\f[B]error\f[R]
Fired when an error happens inside the \f[CR]ServiceWorker\f[R] object.
.SH EXAMPLES
This code snippet is from the \c
.UR
https://github.com/GoogleChrome/samples/blob/gh-pages/service-worker/registration-events/index.html
service worker registration\-events sample
.UE \c
\ (\c
.UR
https://googlechrome.github.io/samples/service-worker/registration-events/
live demo
.UE \c
).
The code listens for any change in the \f[CR]ServiceWorker.state\f[R]
and returns its value.
.IP
.EX
if (\[dq]serviceWorker\[dq] in navigator) {
  navigator.serviceWorker
    .register(\[dq]service\-worker.js\[dq], {
      scope: \[dq]./\[dq],
    })
    .then((registration) => {
      let serviceWorker;
      if (registration.installing) {
        serviceWorker = registration.installing;
        document.querySelector(\[dq]#kind\[dq]).textContent = \[dq]installing\[dq];
      } else if (registration.waiting) {
        serviceWorker = registration.waiting;
        document.querySelector(\[dq]#kind\[dq]).textContent = \[dq]waiting\[dq];
      } else if (registration.active) {
        serviceWorker = registration.active;
        document.querySelector(\[dq]#kind\[dq]).textContent = \[dq]active\[dq];
      }
      if (serviceWorker) {
        // logState(serviceWorker.state);
        serviceWorker.addEventListener(\[dq]statechange\[dq], (e) => {
          // logState(e.target.state);
        });
      }
    })
    .catch((error) => {
      // Something went wrong during registration. The service\-worker.js file
      // might be unavailable or contain a syntax error.
    });
} else {
  // The current browser doesn\[aq]t support service workers.
  // Perhaps it is too old or we are not in a Secure Context.
}
.EE
.SH SEE ALSO
.IP \[bu] 2
\c
.UR https://web.dev/articles/offline-cookbook
The Offline Cookbook
.UE \c
(service workers)
.IP \[bu] 2
Using Service Workers
.IP \[bu] 2
\c
.UR
https://github.com/mdn/dom-examples/tree/main/service-worker/simple-service-worker
Service worker basic code example
.UE \c
.IP \[bu] 2
Using web workers
