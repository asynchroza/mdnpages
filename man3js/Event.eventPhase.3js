.\" Automatically generated by Pandoc 3.1.11
.\"
.TH "Event.eventPhase" "JS" "July 18, 2023" "JavaScript" "JavaScript Reference Manual"
.SH NAME
Event.eventPhase \- Event: eventPhase property
.SH SYNOPSIS
The \f[B]\f[CB]eventPhase\f[B]\f[R] read\-only property of the
\f[CR]Event\f[R] interface indicates which phase of the event flow is
currently being evaluated.
.SH VALUE
Returns an integer value which specifies the current evaluation phase of
the event flow.
Possible values are:
.TP
\f[B]Event.NONE (0)\f[R]
The event is not being processed at this time.
.TP
\f[B]Event.CAPTURING_PHASE (1)\f[R]
The event is being propagated through the target\[cq]s ancestor objects.
This process starts with the \f[CR]Window\f[R], then
\f[CR]Document\f[R], then the \f[CR]HTMLHtmlElement\f[R], and so on
through the elements until the target\[cq]s parent is reached.
Event listeners registered for capture mode when
\f[CR]EventTarget.addEventListener()\f[R] was called are triggered
during this phase.
.TP
\f[B]Event.AT_TARGET (2)\f[R]
The event has arrived at the event\[cq]s target.
Event listeners registered for this phase are called at this time.
If \f[CR]Event.bubbles\f[R] is \f[CR]false\f[R], processing the event is
finished after this phase is complete.
.TP
\f[B]Event.BUBBLING_PHASE (3)\f[R]
The event is propagating back up through the target\[cq]s ancestors in
reverse order, starting with the parent, and eventually reaching the
containing \f[CR]Window\f[R].
This is known as \f[I]bubbling\f[R], and occurs only if
\f[CR]Event.bubbles\f[R] is \f[CR]true\f[R].
Event listeners registered for this phase are triggered during this
process.
.SH EXAMPLE
.SS HTML
.IP
.EX
<h4>Event Propagation Chain</h4>
<ul>
  <li>Click \[aq]d1\[aq]</li>
  <li>Analyze event propagation chain</li>
  <li>Click next div and repeat the experience</li>
  <li>Change Capturing mode</li>
  <li>Repeat the experience</li>
</ul>
<input type=\[dq]checkbox\[dq] id=\[dq]chCapture\[dq] />
<label for=\[dq]chCapture\[dq]>Use Capturing</label>
<div id=\[dq]d1\[dq]>
  d1
  <div id=\[dq]d2\[dq]>
    d2
    <div id=\[dq]d3\[dq]>
      d3
      <div id=\[dq]d4\[dq]>d4</div>
    </div>
  </div>
</div>
<div id=\[dq]divInfo\[dq]></div>
.EE
.SS CSS
.IP
.EX
div {
  margin: 20px;
  padding: 4px;
  border: thin black solid;
}

divInfo {
  margin: 18px;
  padding: 8px;
  background\-color: white;
  font\-size: 80%;
}
.EE
.SS JavaScript
.IP
.EX
let clear = false;
let divInfo = null;
let divs = null;
let chCapture = null;

window.onload = () => {
  divInfo = document.getElementById(\[dq]divInfo\[dq]);
  divs = document.getElementsByTagName(\[dq]div\[dq]);
  chCapture = document.getElementById(\[dq]chCapture\[dq]);
  chCapture.onclick = () => {
    removeListeners();
    addListeners();
    clearDivs();
  };
  clearDivs();
  addListeners();
};

function removeListeners() {
  for (const div of divs) {
    if (div.id !== \[dq]divInfo\[dq]) {
      div.removeEventListener(\[dq]click\[dq], onDivClick, true);
      div.removeEventListener(\[dq]click\[dq], onDivClick, false);
    }
  }
}

function addListeners() {
  for (const div of divs) {
    if (div.id !== \[dq]divInfo\[dq]) {
      if (chCapture.checked) {
        div.addEventListener(\[dq]click\[dq], onDivClick, true);
      } else {
        div.addEventListener(\[dq]click\[dq], onDivClick, false);
        div.onmousemove = () => {
          clear = true;
        };
      }
    }
  }
}

function onDivClick(e) {
  if (clear) {
    clearDivs();
    clear = false;
  }
  if (e.eventPhase === 2) {
    e.currentTarget.style.backgroundColor = \[dq]red\[dq];
  }
  const level =
    [\[dq]none\[dq], \[dq]capturing\[dq], \[dq]target\[dq], \[dq]bubbling\[dq]][e.eventPhase] ?? \[dq]error\[dq];
  const para = document.createElement(\[dq]p\[dq]);
  para.textContent = \[ga]${e.currentTarget.id}; eventPhase: ${level}\[ga];
  divInfo.appendChild(para);
}

function clearDivs() {
  for (let i = 0; i < divs.length; i++) {
    if (divs[i].id !== \[dq]divInfo\[dq]) {
      divs[i].style.backgroundColor = i % 2 !== 0 ? \[dq]#f6eedb\[dq] : \[dq]#cceeff\[dq];
    }
  }
  divInfo.textContent = \[dq]\[dq];
}
.EE
.SS Result
